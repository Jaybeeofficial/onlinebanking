<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Online Bank</title>
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
/>

  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  

  <!-- LOGIN MODAL -->
<div id="loginModal" class="modal">
  <div class="modal-content">

    <!-- LOGIN FORM -->
    <form id="loginForm">
      <h2>Login</h2>

      <input type="email" id="username" placeholder="Email" required />
      <input type="password" id="password" placeholder="Password" required />

      <button type="submit">Login</button>

      <p>
        <a href="#" id="showForgot">Forgot password?</a>
      </p>
      <p>
        <a href="#" id="showSignup">Create an account</a>
      </p>
    </form>

    <!-- SIGN UP FORM -->
    <form id="signupForm" class="hidden">
      <h2>Create Account</h2>

      <input type="text" id="signupName" placeholder="Full Name" required />
      <input type="email" id="signupEmail" placeholder="Email" required />
      <input type="password" id="signupPassword" placeholder="Password" required />

      <button type="submit">Sign Up</button>

      <p>
        <a href="#" id="backToLoginFromSignup">Already have an account? Login</a>
      </p>

      <p id="signupError" style="color:red;"></p>
    </form>

    <!-- FORGOT PASSWORD FORM -->
    <form id="forgotForm" class="hidden">
      <h2>Reset Password</h2>

      <input type="email" id="email" placeholder="Enter your email" required />

      <button type="submit">Send Reset Link</button>

      <p>
        <a href="#" id="backToLogin">Back to login</a>
      </p>
    </form>

  </div>
</div>


  
  <header class="topbar">
  <div class="logo">
    <span class="mountain">‚ñ≤‚ñ≤</span> Alta <strong>Bank</strong>
  </div>

  <nav class="nav" id="nav">
    <a class="active" href="#">Accounts</a>
    <a href="#">Transfer & Pay</a>
    <a href="#">Bill Pay</a>
    <a href="#">Services</a>
    <a href="#">Support</a>
  </nav>

 

 <div class="user" id="user">
  <span>Welcome </span>
  <button class="logout">Log Out</button>
</div>

<div class="hamburger" id="hamburger">‚ò∞</div>

</header>

<main class="container">
  <h1>Welcome back, <span id="welcomeName"></span></h1> 
  <p class="subtitle">Your account overview is below.</p>

  <section class="grid">
    <!-- Accounts Summary -->
    <div class="card account-card">
      <h3>Accounts Summary</h3>

      <div class="account">
        <div class="account-left">
          <div class="account-icon checking">
            <i class="fa-solid fa-money-check-dollar"></i>
          </div>
          <div>
            <strong>Checking</strong>
            <span id="checkingNumber">Ending in ‚Äî</span>
          </div>
        </div>
        <strong id="checkingBalance">$0.00</strong>
      </div>

      <div class="account">
        <div class="account-left">
          <div class="account-icon savings">
            <i class="fa-solid fa-piggy-bank"></i>
          </div>
          <div>
            <strong>Savings</strong>
            <span id="savingsNumber">Ending in ‚Äî</span>
          </div>
        </div>
        <strong id="savingsBalance">$0.00</strong>
      </div>

      <div class="account">
        <div class="account-left">
          <div class="account-icon credit">
            <i class="fa-solid fa-credit-card"></i>
          </div>
          <div>
            <strong>Credit Card</strong>
            <span id="creditNumber">Ending in ‚Äî</span>
          </div>
        </div>
        <strong id="creditBalance">$0.00</strong>
      </div>

      <a class="link" href="#" id="viewDetails">View Details ‚Üí</a>
    </div>

    <!-- Recent Transactions -->
    <div class="card transactions-card">
      <div class="card-header">
        <h3>Recent Transactions</h3>
        <a class="link" href="#" id="viewAll">View All</a>
      </div>

      <div class="transaction" id="transactionList">
        <li>No recent transactions yet</li>
      </div>
    </div>

    <!-- Quick Transfer -->
    <div class="card transfer-card">
      <h3>Quick Transfer</h3>

      <label>From</label>
      <select>
        <option>Checking</option>
      </select>

      <label>To</label>
      <select>
        <option>Savings</option>
      </select>

      <label>Amount</label>
      <div class="currency-input">
        <span class="currency">$</span>
        <input type="number" placeholder="0.00">
      </div>

      <button class="btn green" style="width:auto; min-width:160px; padding:10px 26px;">
        Transfer Funds
      </button>
    </div>

    <!-- Bill Pay -->
    <div class="card billpay-card">
      <h3>Bill Pay</h3>

      <div class="billpay-grid">
        <div class="field">
          <label>Pay To</label>
          <select>
            <option>Electric Company</option>
          </select>
        </div>

        <div class="field">
          <label>Delivery Date</label>
          <input type="date">
        </div>

        <div class="field">
          <label>Amount</label>
          <div class="currency-input">
            <span class="currency">$</span>
            <input type="number" placeholder="0.00">
          </div>
        </div>
      </div>

      <button class="btn blue billpay-btn" style="width:auto; min-width:140px;">
        Pay Bill
      </button>
    </div>
  </section>

  <!-- Account Details Modal -->
  <div class="account-modal account-modal-hidden" id="accountDetailsModal">
    <div class="account-modal-card">
      <h3>Account Details</h3>
      <p><strong>Checking Account</strong> ‚Ä¢ <span id="modalCheckingNumber">Ending in ‚Äî</span></p>
      <p>Available Balance: <span id="modalCheckingBalance">$0.00</span></p>
      <p>Account Type: Checking</p>
      <p>Opened: <span id="modalOpened">‚Äî</span></p>
      <p>Branch: <span id="modalBranch">‚Äî</span></p>
      <h4>Recent Activity</h4>
      <ul id="modalRecentActivity">
        <li>No recent transactions yet</li>
      </ul>
      <button class="account-modal-close btn">Close</button>
    </div>
  </div>

  <!-- Recent Transactions Modal -->
  <div class="transactions-modal account-modal-hidden" id="transactionsModal">
    <div class="account-modal-card">
      <h3>Recent Transactions</h3>
      <ul id="modalTransactionsList">
        <li>No recent transactions yet</li>
      </ul>
      <button class="account-modal-close btn">Close</button>
    </div>
  </div>

  <!-- Create / Change PIN Modal -->
<div class="receipt-modal hidden" id="pinModal">
  <div class="receipt-card">
    <h3 id="pinModalTitle">Create Your 4-Digit PIN</h3>
    <input type="password" id="transferPin" maxlength="4" placeholder="****" />
    <button class="btn blue" id="confirmPin">Confirm</button>
    <button class="btn close-receipt" id="cancelPin">Cancel</button>
  </div>
</div>

<!-- PIN Error Modal -->
<div class="receipt-modal hidden" id="pinErrorModal">
  <div class="receipt-card">
    <h3>Incorrect PIN</h3>
    <p>The PIN you entered is incorrect. Please try again.</p>
    <button class="btn blue close-receipt" id="closePinError">Close</button>
  </div>
</div>

<!-- Account On Hold Modal -->
<div class="receipt-modal hidden" id="accountHoldModal">
  <div class="receipt-card">
    <h3>Transfer On Hold</h3>
    <p>Your account needs to be upgraded to complete this transaction.</p>
    <button class="btn blue close-receipt" id="closeAccountHold">Close</button>
  </div>
</div>

</main>



<!-- BALANCE CARD -->
<div class="card balance-card">
  <h3>Available Balance</h3>
  <h1 id="balance">$0.00</h1>
</div>

<div class="card transfer-card">
  <h2>Transfer & Pay</h2>

  <form class="transfer-form" id="transferForm">
    <label>Recipient Account Number</label>
    <input type="text" id="accountNumber" required />

    <label>Bank</label>
    <select id="bank" required>
      <option value="">Select Bank</option>
      <option>JPMorgan Chase (USA)</option>
      <option>Bank of America (USA)</option>
      <option>Citibank (USA)</option>
      <option>Wells Fargo (USA)</option>
      <option>HSBC (UK)</option>
      <option>Barclays (UK)</option>
      <option>Lloyds Bank (UK)</option>
      <option>Deutsche Bank (Germany)</option>
      <option>BNP Paribas (France)</option>
      <option>Credit Suisse (Switzerland)</option>
    </select>

    <label>Account Name</label>
    <input type="text" id="accountName" required />

    <label>Amount</label>
    <div class="currency-input">
      <span class="currency">$</span>
      <input type="number" id="amount" required />
    </div>

    <button type="submit" class="btn blue">Transfer Money</button>
  </form>
</div>



<!-- TRANSFER HISTORY CARD -->
<div class="card transfer-history">
  <h3>Transfer History</h3>
  <div id="historyList">
    <p>No transfers yet</p>
  </div>
</div>









<section class="services-section">

  <h2 class="services-title">Our Banking Services</h2>
  <p class="services-subtitle">Everything you need to manage your account securely</p>

  <div class="services-grid">

    <div class="service-card">
      <i class="fa-solid fa-user-shield"></i>
      <h4>Account Management</h4>
      <p>Manage your accounts, balances, and personal information.</p>
      <button class="service-btn" data-service="account">Learn More</button>
    </div>

    <div class="service-card">
      <i class="fa-solid fa-money-bill-transfer"></i>
      <h4>Money Transfers</h4>
      <p>Send money securely to local and international banks.</p>
      <button class="service-btn" data-service="transfer">Learn More</button>
    </div>

    <div class="service-card">
      <i class="fa-solid fa-file-invoice-dollar"></i>
      <h4>Bill Payments</h4>
      <p>Pay utilities, subscriptions, and services on time.</p>
      <button class="service-btn" data-service="bill">Learn More</button>
    </div>

    <div class="service-card">
      <i class="fa-solid fa-lock"></i>
      <h4>Security & PIN</h4>
      <p>Protect your account with secure PIN and verification.</p>
      <button class="service-btn" data-service="security">Learn More</button>
    </div>

    <div class="service-card">
      <i class="fa-solid fa-clock-rotate-left"></i>
      <h4>Transaction History</h4>
      <p>View detailed records of all transactions.</p>
      <button class="service-btn" data-service="history">Learn More</button>
    </div>

    <div class="service-card highlight premium">
  <span class="premium-badge">PREMIUM</span>
      <i class="fa-solid fa-arrow-up-right-dots"></i>
      <h4>Account Upgrade</h4>
      <p>Upgrade your account to remove transfer restrictions.</p>
      <button class="service-btn upgrade" data-service="upgrade">Upgrade Now</button>
    </div>

  </div>
</section>


<div class="services-modal hidden" id="servicesModal">
  <div class="services-modal-card">
    <h3 id="serviceTitle"></h3>
    <p id="serviceContent"></p>
    <button class="btn blue" id="closeServiceModal">Close</button>
  </div>
</div>


<section class="support-section">

  <h2 class="support-title">Support Center</h2>
  <p class="support-subtitle">We‚Äôre here to help you 24/7</p>

  <!-- SUPPORT OPTIONS -->
  <div class="support-grid">

    <div class="support-card">
      <i class="fa-solid fa-headset"></i>
      <h4>Live Support</h4>
      <p>Chat with our support team for immediate assistance.</p>
      <button class="support-btn" data-support="chat">Start Chat</button>
    </div>

    
    <div class="support-card">
  <i class="fa-solid fa-envelope"></i>
  <h4>Email Support</h4>
  <p>Send us an email and we‚Äôll respond within 24 hours.</p>
  <button class="support-btn" data-support="email">Contact Us</button>
  <p class="email-info" style="display:none; color:green; margin-top:8px;">
    Email: <a href="mailto:support@yourbank.com">binancecompany940@gmail.com</a>
  </p>
</div>


    <div class="support-card">
      <i class="fa-solid fa-circle-question"></i>
      <h4>FAQs</h4>
      <p>Find quick answers to common questions.</p>
      <button class="support-btn" data-support="faq">View FAQs</button>
    </div>

  </div>

  <!-- FAQ SECTION -->
  <div class="faq-section hidden" id="faqSection">

    <div class="faq-item">
      <h5>Why is my transfer on hold?</h5>
      <p>Your account may require an upgrade to complete transfers.</p>
    </div>

    <div class="faq-item">
      <h5>How do I change my transfer PIN?</h5>
      <p>You can change your PIN from the dashboard under security settings.</p>
    </div>

    <div class="faq-item">
      <h5>How long do transfers take?</h5>
      <p>Transfers are usually instant but may be delayed for verification.</p>
    </div>

  </div>



  <div class="chat-widget hidden" id="chatWidget">
  <div class="chat-header">
    <h4>Live Support</h4>
    <button id="closeChat">‚úï</button>
  </div>
  <div class="chat-messages" id="chatMessages"></div>
  <form id="chatForm">
    <input type="text" id="chatInput" placeholder="Type your message..." required />
    <button type="submit">Send</button>
  </form>
</div>


</section>








<footer class="footer">
  <span>üì± Mobile Banking</span>
  <span>‚ùì Support Center</span>
  <span>üìä Financial Tools</span>
</footer>


<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- Your script -->
<script src="script.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const hamburger = document.getElementById("hamburger");
    const nav = document.getElementById("nav");
    const user = document.getElementById("user");

    hamburger.addEventListener("click", () => {
      nav.classList.toggle("open");
      user.classList.toggle("open");
      hamburger.textContent =
        hamburger.textContent === "‚ò∞" ? "‚úï" : "‚ò∞";
    });
  });
</script>






<script>
document.addEventListener("DOMContentLoaded", () => {

  const auth = firebase.auth();
  const db = firebase.firestore();

  let currentUserId = null;
  auth.onAuthStateChanged(user => {
    currentUserId = user ? user.uid : null;
  });

  // ----------------- FAQ -----------------
  document.querySelectorAll('.support-btn[data-support="faq"]').forEach(btn => {
    btn.addEventListener("click", () => {
      const faq = document.getElementById("faqSection");
      if(faq) faq.classList.toggle("hidden");
    });
  });

  // ----------------- Email -----------------
  document.querySelectorAll('.support-btn[data-support="email"]').forEach(btn => {
    btn.addEventListener("click", () => {
      const info = btn.closest(".support-card")?.querySelector(".email-info");
      if(info) {
        info.style.display = info.style.display === "block" ? "none" : "block";
      }
    });
  });

  // ----------------- Chat -----------------
  const chatWidget = document.getElementById("chatWidget");
  const chatMessages = document.getElementById("chatMessages");
  const chatForm = document.getElementById("chatForm");
  const chatInput = document.getElementById("chatInput");
  const closeChat = document.getElementById("closeChat");
  let unsubscribeChat = null;

  document.querySelectorAll('.support-btn[data-support="chat"]').forEach(btn => {
    btn.addEventListener("click", async () => {

      if (!currentUserId) {
        alert("Please login to start chat");
        return;
      }

      if(!chatWidget) return;
      chatWidget.classList.remove("hidden");

      const chatRef = db.collection("chats").doc(currentUserId);
      await chatRef.set(
        { userId: currentUserId, createdAt: firebase.firestore.FieldValue.serverTimestamp() },
        { merge: true }
      );

      const messagesRef = chatRef.collection("messages");

      // Remove old listener
      if (unsubscribeChat) unsubscribeChat();

      unsubscribeChat = messagesRef.orderBy("timestamp").onSnapshot(snapshot => {
        if(!chatMessages) return;
        chatMessages.innerHTML = "";

        snapshot.forEach(doc => {
          const msg = doc.data();
          const div = document.createElement("div");
          div.textContent = msg.message;

          div.className = msg.sender === "admin" ? "admin" : msg.sender === "user" ? "user" : "system";
          div.style.padding = "6px 10px";
          div.style.margin = "4px 0";
          div.style.borderRadius = "8px";
          div.style.maxWidth = "70%";
          div.style.alignSelf = msg.sender === "admin" ? "flex-start" : "flex-end";
          div.style.background = msg.sender === "admin" ? "#007BFF" : "#e0e0e0";
          div.style.color = msg.sender === "admin" ? "#fff" : "#000";

          chatMessages.appendChild(div);
        });

        chatMessages.scrollTop = chatMessages.scrollHeight;
      });

      // Send message
      chatForm.onsubmit = async e => {
        e.preventDefault();
        const message = chatInput.value.trim();
        if(!message) return;

        await messagesRef.add({
          sender: "user",
          message,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });

        chatInput.value = "";
      };

    });
  });

  // Close chat
  closeChat?.addEventListener("click", () => {
    chatWidget?.classList.add("hidden");
  });

});
</script>


<script>
  document.addEventListener("DOMContentLoaded", () => {
  const auth = firebase.auth();
  const db = firebase.firestore();

  const pinModal = document.getElementById("pinModal");
  const transferPinInput = document.getElementById("transferPin");
  const confirmPinBtn = document.getElementById("confirmPin");
  const cancelPinBtn = document.getElementById("cancelPin");
  const pinErrorModal = document.getElementById("pinErrorModal");
  const closePinErrorBtn = document.getElementById("closePinError");

  let currentUser = null;
  let pinAction = "verify"; 
  let transferCallback = null; 

  
  auth.onAuthStateChanged(user => {
    if (user) currentUser = user;
  });

 
  function openPinModal(action = "verify", callback = null) {
    pinAction = action;
    transferCallback = callback;
    transferPinInput.value = "";
    pinModal.classList.remove("hidden");

    if (pinAction === "create") {
      pinModal.querySelector("h3").textContent = "Create Your Transfer PIN";
      confirmPinBtn.textContent = "Set PIN";
    } else if (pinAction === "change") {
      pinModal.querySelector("h3").textContent = "Change Your Transfer PIN";
      confirmPinBtn.textContent = "Change PIN";
    } else {
      pinModal.querySelector("h3").textContent = "Enter Transfer PIN";
      confirmPinBtn.textContent = "Confirm";
    }
  }

  
  confirmPinBtn.addEventListener("click", async () => {
    const pin = transferPinInput.value.trim();
    if (pin.length !== 4 || isNaN(pin)) {
      alert("PIN must be 4 digits");
      return;
    }

    try {
      const pinDocRef = db.collection("pins").doc(currentUser.uid);
      const pinDoc = await pinDocRef.get();

      if (pinAction === "create") {
        if (pinDoc.exists) {
          alert("You already have a PIN. Use change PIN instead.");
          return;
        }
        await pinDocRef.set({ pin });
        alert("PIN created successfully!");
        pinModal.classList.add("hidden");
      }

      else if (pinAction === "change") {
        if (!pinDoc.exists) {
          alert("No PIN found. Create a PIN first.");
          return;
        }
        await pinDocRef.update({ pin });
        alert("PIN changed successfully!");
        pinModal.classList.add("hidden");
      }

      else if (pinAction === "verify") {
        if (!pinDoc.exists || pinDoc.data().pin !== pin) {
          pinModal.classList.add("hidden");
          pinErrorModal.classList.remove("hidden");
          return;
        }
        pinModal.classList.add("hidden");
        if (transferCallback) transferCallback();
      }

    } catch (err) {
      alert("Error with PIN: " + err.message);
    }
  });

 
  cancelPinBtn.addEventListener("click", () => {
    pinModal.classList.add("hidden");
  });

  
  closePinErrorBtn.addEventListener("click", () => {
    pinErrorModal.classList.add("hidden");
  });

 
  auth.onAuthStateChanged(async user => {
    if (user) {
      // Check if PIN exists
      const pinDoc = await db.collection("pins").doc(user.uid).get();
      if (!pinDoc.exists) {
        openPinModal("create");
      }
    }
  }); 

 // ----------------------------
  // Example usage: change PIN
  // ----------------------------
  // You can trigger this with a button click somewhere in your dashboard
  // changePinBtn.addEventListener("click", () => openPinModal("change"));

  // ----------------------------
  // Example usage: verify PIN before transfer
  // ----------------------------
  // transferButton.addEventListener("click", () => {
  //   openPinModal("verify", () => {
  //     console.log("PIN verified! Proceed with transfer.");
  //   });
  // });
});

</script>


<script>
document.addEventListener("DOMContentLoaded", () => {

  

  const servicesModal = document.getElementById("servicesModal");
  const serviceTitle = document.getElementById("serviceTitle");
  const serviceContent = document.getElementById("serviceContent");
  const closeServiceModal = document.getElementById("closeServiceModal");

  const serviceInfo = {
    account: "Manage your accounts, balances, and personal information securely.",
    transfer: "Send money to local and international banks with real-time tracking.",
    bill: "Pay utilities, subscriptions, and services easily.",
    security: "Manage your transfer PIN and account security settings.",
    history: "View your complete transaction history and receipts.",
    upgrade: "Upgrade your account to unlock higher limits and premium features."
  };

  document.querySelectorAll(".service-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const key = btn.dataset.service;
      const cardTitle = btn.closest(".service-card")?.querySelector("h4")?.textContent;

      serviceTitle.textContent = cardTitle || "Service Info";
      serviceContent.textContent = serviceInfo[key] || "Information coming soon.";

      servicesModal.classList.remove("hidden");
    });
  });

  closeServiceModal?.addEventListener("click", () => {
    servicesModal.classList.add("hidden");
  });


  

  
 

  
console.log("‚úÖ Button handlers loaded successfully");

 });
</script>



<script>
  window.onload = () => {
  const checkingBalanceEl = document.getElementById("checkingBalance");
  const savingsBalanceEl = document.getElementById("savingsBalance");
  const creditBalanceEl = document.getElementById("creditBalance");
  const balanceEl = document.getElementById("balance");

  const checkingNumberEl = document.getElementById("checkingNumber");
  const savingsNumberEl = document.getElementById("savingsNumber");
  const creditNumberEl = document.getElementById("creditNumber");

  auth.onAuthStateChanged(user => {
    if(!user) return;

    db.collection("users").doc(user.uid).onSnapshot(doc => {
      if(!doc.exists) return;
      const data = doc.data();

      const checking = data.checking?.balance || 0;
      const savings = data.savings?.balance || 0;
      const credit = data.credit?.balance || 0;

      checkingBalanceEl.textContent = `$${checking.toFixed(2)}`;
      savingsBalanceEl.textContent = `$${savings.toFixed(2)}`;
      creditBalanceEl.textContent = `$${credit.toFixed(2)}`;

      balanceEl.textContent = `$${(checking + savings + credit).toFixed(2)}`;

      checkingNumberEl.textContent = `Ending in ${data.checking?.number?.slice(-4) || "‚Äî"}`;
      savingsNumberEl.textContent = `Ending in ${data.savings?.number?.slice(-4) || "‚Äî"}`;
      creditNumberEl.textContent = `Ending in ${data.credit?.number?.slice(-4) || "‚Äî"}`;
    });
  });
};

</script>









</body>
</html>

